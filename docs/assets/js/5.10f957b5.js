(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{325:function(e,t,a){"use strict";a.r(t);var s=a(33),n=Object(s.a)({},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h1",{attrs:{id:"zhlint"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#zhlint"}},[e._v("#")]),e._v(" zhlint")]),e._v(" "),a("p",[e._v("A linting tool for Chinese text content.")]),e._v(" "),a("h2",{attrs:{id:"how-to-install"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#how-to-install"}},[e._v("#")]),e._v(" How to install")]),e._v(" "),a("p",[a("em",[e._v("WIP (not published yet, currenly can use by "),a("code",[e._v("npm link")]),e._v(" on this repo)")])]),e._v(" "),a("h2",{attrs:{id:"usage"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#usage"}},[e._v("#")]),e._v(" Usage")]),e._v(" "),a("h3",{attrs:{id:"as-cli"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#as-cli"}},[e._v("#")]),e._v(" As CLI")]),e._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# glob files, lint them, and print validation report,")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# and exit with code `1` if there is any error found. ")]),e._v("\nzhlint "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("<")]),e._v("file-pattern"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# glob files and fix their all possilbly found errors.")]),e._v("\nzhlint "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("<")]),e._v("file-pattern"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" --fix\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# lint the file and output fixed content into another file")]),e._v("\nzhlint "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("<")]),e._v("input-file-path"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" --output"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("<")]),e._v("output-file-path"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# print usage info")]),e._v("\nzhlint --help\n")])])]),a("h3",{attrs:{id:"as-node-js-package"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#as-node-js-package"}},[e._v("#")]),e._v(" As Node.js package")]),e._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("const")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v(" run"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v(" report "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[e._v("'zhlint'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("const")]),e._v(" value "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v("'自动在中文和English之间加入空格'")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("const")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v(" result"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v(" validations "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("run")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),e._v("value"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("// print '自动在中文和 English 之间加入空格''")]),e._v("\nconsole"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),e._v("result"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("// print validation report")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("report")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v(" file"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v("'foo.md'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v(" value"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v(" validations "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v("\n")])])]),a("p",[e._v("And the format of validation report is more like this:")]),e._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[e._v("foo.md:1:6 - There should be a space between a half-width content and a full-width content\n\n自动在中文和English之间加入空格\n           ^\nfoo.md:1:13 - There should be a space between a half-width content and a full-width content\n\n自动在中文和English之间加入空格\n                  ^\nInvalid files:\n- foo.md\n\nFound "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("2")]),e._v(" errors.\n")])])]),a("h4",{attrs:{id:"api"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#api"}},[e._v("#")]),e._v(" API")]),e._v(" "),a("ul",[a("li",[a("code",[e._v("run(str: string, options?: Options): Result")]),e._v(": Lint a certain file.\n"),a("ul",[a("li",[e._v("parameters:\n"),a("ul",[a("li",[a("code",[e._v("str")]),e._v(": The text content you want to lint.")]),e._v(" "),a("li",[a("code",[e._v("options")]),e._v(": Some options for advanced usage.")])])]),e._v(" "),a("li",[e._v("returns:\n"),a("ul",[a("li",[e._v("The result of a single piece of input string. It contains fixed text content as "),a("code",[e._v("value")]),e._v(" and the infor of all "),a("code",[e._v("validations")]),e._v(".")])])])])]),e._v(" "),a("li",[a("code",[e._v("report(results: Result[], logger?: Console): void")]),e._v(": Print out the validation reports for each file.\n"),a("ul",[a("li",[e._v("parameters:\n"),a("ul",[a("li",[a("code",[e._v("results")]),e._v(": An array for all linted results.")]),e._v(" "),a("li",[a("code",[e._v("logger")]),e._v(": The logger instance, by default it's "),a("code",[e._v("console")]),e._v(" in Node.js/browser.")])])])])])]),e._v(" "),a("h4",{attrs:{id:"other-type-defs-and-advanced-usage"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#other-type-defs-and-advanced-usage"}},[e._v("#")]),e._v(" Other type defs and advanced usage")]),e._v(" "),a("ul",[a("li",[a("code",[e._v("Result")]),e._v(": "),a("code",[e._v("{ file?: string, value: string, validations: Validation[] }")]),e._v(" "),a("ul",[a("li",[a("code",[e._v("file")]),e._v(": The file name. It's an optional field which is only used in CLI.")]),e._v(" "),a("li",[a("code",[e._v("value")]),e._v(": the finally fixed text content.")]),e._v(" "),a("li",[a("code",[e._v("validations")]),e._v(": All the validation information.")])])]),e._v(" "),a("li",[a("code",[e._v("Validation")]),e._v(": "),a("code",[e._v("{ index: number, length: number, name: string, target: string, message: string }")]),e._v(" "),a("ul",[a("li",[a("code",[e._v("index")]),e._v(": The index of the target token in the input string.")]),e._v(" "),a("li",[a("code",[e._v("length")]),e._v(": The length of the target token in the input string.")]),e._v(" "),a("li",[a("code",[e._v("name")]),e._v(": The name of the rule that the token disobeys to.")]),e._v(" "),a("li",[a("code",[e._v("target")]),e._v(": The target part of the target token, like the "),a("code",[e._v("content")]),e._v(" or the "),a("code",[e._v("spaceAfter")]),e._v(" that, etc.")]),e._v(" "),a("li",[a("code",[e._v("message")]),e._v(": The description of this validation in natural language.")])])]),e._v(" "),a("li",[a("code",[e._v("Options")]),e._v(": "),a("code",[e._v("{ rules?: string[], hyperParse?: string[], ignoredCases?: IgnoredCase[], logger?: Console }")]),e._v(": Customize your own rules and\n"),a("ul",[a("li",[a("code",[e._v("rules")]),e._v(": customize the linting rules by their names, could be "),a("code",[e._v("undefined")]),e._v(" which means just use the default "),a("a",{attrs:{href:"./src/rules"}},[e._v("rules")]),e._v(".")]),e._v(" "),a("li",[a("code",[e._v("hyperParse")]),e._v(": customize the hyper parser by their names, could be "),a("code",[e._v("undefined")]),e._v(" which means just use default "),a("a",{attrs:{href:"./src/parsers"}},[e._v("Markdown parser")]),e._v(" and the "),a("a",{attrs:{href:"./src/parsers"}},[e._v("Hexo variables parser")]),e._v(".")]),e._v(" "),a("li",[a("code",[e._v("ignoredCases")]),e._v(": provide exception cases which you would like to skip.")]),e._v(" "),a("li",[a("code",[e._v("logger")]),e._v(": same to the parameter in "),a("code",[e._v("report(...)")]),e._v(".")])])]),e._v(" "),a("li",[a("code",[e._v("IgnoredCase")]),e._v(": "),a("code",[e._v("{ prefix?, textStart, textEnd?, suffix? }")]),e._v(" "),a("ul",[a("li",[e._v("Just follows a certain format inspired from "),a("a",{attrs:{href:"https://github.com/WICG/ScrollToTextFragment",target:"_blank",rel:"noopener noreferrer"}},[e._v("W3C Scroll To Text Fragment Proposal"),a("OutboundLink")],1),e._v(".")])])])]),e._v(" "),a("h2",{attrs:{id:"features"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#features"}},[e._v("#")]),e._v(" Features")]),e._v(" "),a("h3",{attrs:{id:"markdown-syntax-support"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#markdown-syntax-support"}},[e._v("#")]),e._v(" Markdown syntax support")]),e._v(" "),a("p",[e._v("We support lint your text content in Markdown syntax by default. For example:")]),e._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[e._v("run")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[e._v("'自动在_中文_和**English**之间加入空格'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v("\n")])])]),a("p",[e._v("It will analyse the Markdown syntax first and extract the pure text content and do the lint job. After that the fixed pure text content could be replaced back to the raw Markdown string and returned as the output "),a("code",[e._v("value")]),e._v(" in result.")]),e._v(" "),a("h3",{attrs:{id:"hexo-tags-syntax-support"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#hexo-tags-syntax-support"}},[e._v("#")]),e._v(" Hexo tags syntax support")]),e._v(" "),a("p",[e._v("Specially, we support "),a("a",{attrs:{href:"https://hexo.io/docs/tag-plugins",target:"_blank",rel:"noopener noreferrer"}},[e._v("Hexo tags syntax"),a("OutboundLink")],1),e._v(" just because when we use Hexo to build Vue.js website, the markdown source files more or less include special tags like that so got the unpredictable result.")]),e._v(" "),a("p",[e._v("As a result, we additionally skip the Hexo-style tags by default. For example:")]),e._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[e._v("run")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[e._v("'现在过滤器只能用在插入文本中 (`{% raw %}{{ }}{% endraw %}` tags)。'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n")])])]),a("h3",{attrs:{id:"setup-ignored-cases"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#setup-ignored-cases"}},[e._v("#")]),e._v(" Setup ignored cases")]),e._v(" "),a("p",[e._v("In some real cases we have special text contents not follow the rules by reason. So we could ues "),a("code",[e._v("ignoredCases")]),e._v(" option to config that. For example we'd like to keep the spaces inside a pair of brackets, which is invalid by default. Then we could write one more line of HTML comment anywhere inside the file:")]),e._v(" "),a("div",{staticClass:"language-md extra-class"},[a("pre",{pre:!0,attrs:{class:"language-md"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("\x3c!-- the good case --\x3e")]),e._v("\ntext before (text inside) text after\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("\x3c!-- the bad case --\x3e")]),e._v("\nvm.$on( event, callback )\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("\x3c!-- then we could write this down below to make it work --\x3e")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("\x3c!-- zhlint ignore: ( , ) --\x3e")]),e._v("\n")])])]),a("p",[e._v("or just pass it through as an option:")]),e._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[e._v("run")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),e._v("str"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v(" ignoredCases"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v(" textStart"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v("'( '")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v(" textEnd"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v("' )'")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v("\n")])])]),a("h2",{attrs:{id:"supported-preproccessors-hyper-parsers"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#supported-preproccessors-hyper-parsers"}},[e._v("#")]),e._v(" Supported preproccessors (hyper parsers)")]),e._v(" "),a("ul",[a("li",[a("code",[e._v("ignore")]),e._v(": find all ignored pieces by the HTML comment "),a("code",[e._v("\x3c!-- zhlint ignore: ... --\x3e")])]),e._v(" "),a("li",[a("code",[e._v("hexo")]),e._v(": find all Hexo tags to avoid them being parsed.")]),e._v(" "),a("li",[a("code",[e._v("markdown")]),e._v(": parse by markdown syntax and find all block-level texts and inline-level marks.")])]),e._v(" "),a("h2",{attrs:{id:"supported-rules"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#supported-rules"}},[e._v("#")]),e._v(" Supported rules")]),e._v(" "),a("p",[e._v("Almost the rules come from "),a("a",{attrs:{href:"https://github.com/vuejs/cn.vuejs.org/wiki",target:"_blank",rel:"noopener noreferrer"}},[e._v("the Wiki page of Vue.js Chinese website"),a("OutboundLink")],1),e._v(".")]),e._v(" "),a("ul",[a("li",[a("code",[e._v("mark-raw")]),e._v(": keep one space out of the inline code in markdown\n"),a("ul",[a("li",[a("code",[e._v("text`text`text")]),e._v(" -> "),a("code",[e._v("text `text` text")])])])]),e._v(" "),a("li",[a("code",[e._v("mark-hyper")]),e._v(": move the space outside of the markdown marks\n"),a("ul",[a("li",[a("code",[e._v("text[ text ](link)text")]),e._v(" -> "),a("code",[e._v("text [text](link) text")])])])]),e._v(" "),a("li",[a("code",[e._v("unify-punctuation")]),e._v(": unify all punctuations with same meaning, as part of the translation conventions, the punctuation should be full-width except brackets.\n"),a("ul",[a("li",[a("code",[e._v("中文, 中文.")]),e._v(" -> "),a("code",[e._v("中文，中文。")])])])]),e._v(" "),a("li",[a("code",[e._v("case-abbr")]),e._v(": escape cases with half-width dots like "),a("code",[e._v("Mr.")]),e._v(", "),a("code",[e._v("e.g.")]),e._v(".\n"),a("ul",[a("li",[a("code",[e._v("Mr.")]),e._v(" -> "),a("code",[e._v("Mr.")])])])]),e._v(" "),a("li",[a("code",[e._v("space-full-width-content")]),e._v(": keep one space between half-width content and full-width content\n"),a("ul",[a("li",[a("code",[e._v("中文English中文")]),e._v(" -> "),a("code",[e._v("中文 English 中文")])])])]),e._v(" "),a("li",[a("code",[e._v("space-punctuation")]),e._v(": keep no space between full-width punctuation and the content besides, keep one space between half-width punctuation and the content besides\n"),a("ul",[a("li",[a("code",[e._v("中文 ， 中文")]),e._v(" -> "),a("code",[e._v("中文，中文")])])])]),e._v(" "),a("li",[a("code",[e._v("case-math-exp")]),e._v(": overwrite cases with math expressions\n"),a("ul",[a("li",[a("code",[e._v("1+1=2")]),e._v(" -> "),a("code",[e._v("1 + 1 = 2")])])])]),e._v(" "),a("li",[a("code",[e._v("case-backslash")]),e._v(": deal with the backslash specially to avoid unpredictable result\n"),a("ul",[a("li",[a("code",[e._v("这实质上和问题 \\#1 是相同的")])])])]),e._v(" "),a("li",[a("code",[e._v("space-brackets")]),e._v(": keep one space outside and no space inside a pair of brackets when it's half-width, keep no space inside or outside when it's full-width")]),e._v(" "),a("li",[a("code",[e._v("space-quotes")]),e._v(": keep one space outside and no space inside a pair of brackets when it's half-width, keep no space inside or outside when it's full-width")]),e._v(" "),a("li",[a("code",[e._v("case-traditional")]),e._v(": unify all quotes, as part of the translation conventions.\n"),a("ul",[a("li",[a("code",[e._v("a「b」c")]),e._v(" -> "),a("code",[e._v("a“b”c")])])])]),e._v(" "),a("li",[a("code",[e._v("case-datetime")]),e._v(": deal with the date & time specially to avoid unpredictable result\n"),a("ul",[a("li",[a("code",[e._v("2020/01/02 01:20:30")])])])]),e._v(" "),a("li",[a("code",[e._v("case-datetime-zh")]),e._v(": deal with the Chinese date & time format specially to avoid unpredictable result\n"),a("ul",[a("li",[a("code",[e._v("中文2020年1月1日0天0号0时0分00秒")])])])]),e._v(" "),a("li",[a("code",[e._v("case-ellipsis")]),e._v(": deal with the continuous dots as ellipsis specially to avoid unpredictable result\n"),a("ul",[a("li",[a("code",[e._v("中文...中文...a...b...中文...中文...a...b...")])])])]),e._v(" "),a("li",[a("code",[e._v("case-html-entity")]),e._v(": deal with the HTML entities specially to avoid unpredicutable result\n"),a("ul",[a("li",[a("code",[e._v("中文&lt; &amp; &gt;中文")])])])]),e._v(" "),a("li",[a("code",[e._v("case-raw")]),e._v(": deal with the inline code in markdown specially to avoid unpredictable result\n"),a("ul",[a("li",[a("code",[e._v("`Vue.nextTick`/`vm.$nextTick`")])])])]),e._v(" "),a("li",[a("code",[e._v("case-linebreak")]),e._v(": deal with the linebreak (2 spaces at the end of a line) in markdown specially to avoid unpredictable result")])]),e._v(" "),a("h2",{attrs:{id:"contribute"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#contribute"}},[e._v("#")]),e._v(" Contribute")]),e._v(" "),a("p",[e._v("Feel free to contribute in any way.")])])}),[],!1,null,null,null);t.default=n.exports}}]);